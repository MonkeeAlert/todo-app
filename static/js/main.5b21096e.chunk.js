(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{33:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var o=n(1),s=n(0),i=n.n(s),c=n(6),a=n.n(c),r=n(2),u=Object(s.forwardRef)((function(t,e){var n=t.type,s=t.placeholder,i=t.className;return Object(o.jsx)("input",{type:n,placeholder:s,ref:e,className:i})})),d=function(t,e){var n=t.type,s=t.text,i=t.className,c=t.onButtonClick,a=void 0===c?null:c;return Object(o.jsx)("button",{type:n,onClick:a,className:i,children:s})},l="ADD_TODO",b="REMOVE_TODO",j="UPDATE_TODO",m="TOGGLE_MODAL",f=function(t){return{type:j,payload:t}},p=function(t){return{type:m,payload:t}},w=n(9);function O(){var t="abcdefghijklmnopqrstuvwxyz",e="0123456789";return Object(w.a)(new Array(10)).map((function(t,e){return Math.ceil(Math.random()*e)>1?0:1})).sort((function(t){return.5-Math.random()})).map((function(n,o){return 1===n?t[Math.ceil(Math.random()*t.length-1)]:e[Math.ceil(Math.random()*e.length-1)]})).join("")}function S(){var t=["\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0438\u0446\u0446\u0443","\u041f\u043e\u0438\u0433\u0440\u0430\u0442\u044c \u043d\u0430 \u0433\u0438\u0442\u0430\u0440\u0435","\u0421\u0445\u043e\u0434\u0438\u0442\u044c \u0432 \u043c\u0430\u0433\u0430\u0437\u0438\u043d","\u041f\u0440\u043e\u0433\u0443\u043b\u044f\u0442\u044c\u0441\u044f","\u0412\u0441\u0442\u0440\u0435\u0442\u0438\u0442\u044c\u0441\u044f \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438"];return t[Math.floor(Math.random()*(t.length-1))]}var A=function(t){var e=t.children,n=t.onSubmitEvent,s=t.className;return Object(o.jsx)("form",{onSubmit:function(t){t.preventDefault(),n()},className:s,children:e})};var x=function(){var t=Object(r.c)(),e=Object(s.useRef)();return Object(o.jsxs)(A,{onSubmitEvent:function(n){if(""===e.current.value)return!1;var o={title:e.current.value,id:O()};t({type:l,payload:o}),e.current.value="",e.current.placeholder=S()},className:"todo__form",children:[Object(o.jsx)(u,{ref:e,type:"text",placeholder:S(),className:"input todo__form-input"}),Object(o.jsx)(d,{type:"submit",text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"button button--teal"})]})},h=n(17);function _(t){var e=t.id,n=t.isPaused,i=t.title,c=t.countdownAsMs,a=t.countdownAsString,u=(t.buttonRef,Object(s.useState)(n)),l=Object(h.a)(u,2),b=l[0],j=l[1],m=Object(s.useRef)(),w=Object(s.useRef)(),O=Object(s.useRef)(),S=Object(s.useRef)(c||0),A=Object(r.c)(),x=Object(r.d)();Object(s.useEffect)((function(){}),[n]);var _=function(t){if(void 0!==m.current){var n={id:e,timer:m.current};x.getState().modal.isVisible&&A(p({context:n,isVisible:!1})),A(f({id:e,isPaused:!0,countdownAsMs:S.current,countdownAsString:w.current.innerHTML})),clearInterval(m.current)}j(!0)};return Object(o.jsxs)("li",{className:"todo__list-item",children:[Object(o.jsx)("p",{className:"text text--header todo__list-block todo__list-block--header todo__list-text todo__list-text--header",children:i}),Object(o.jsxs)("p",{className:"text text--header todo__list-block todo__list-block--timer todo__list-text todo__list-text--header",children:[Object(o.jsx)("span",{ref:w,children:a}),b?Object(o.jsx)(d,{type:"button",className:"button button--icon button--play",onButtonClick:function(t){var n,o,s,i,c,a,r,u;if(O.current=Date.now()-S.current,m.current=setInterval((function(t){S.current=Date.now()-O.current,i=Math.floor(S.current/864e5),s=Math.floor(S.current%864e5/36e5),o=Math.floor(S.current%36e5/6e4),n=Math.floor(S.current%6e4/1e3),c=n.toString().padStart(2,"0"),a=o.toString().padStart(2,"0"),r=s.toString().padStart(2,"0"),u=i.toString().padStart(2,"0"),w.current.innerHTML="".concat(u,":").concat(r,":").concat(a,":").concat(c)}),1e3),x.getState().modal.isVisible){var d={id:e,timer:m.current};A(p({context:d,isVisible:!1}))}A(f({id:e,isPaused:!1,countdownAsMs:S.current,countdownAsString:w.current.innerHTML})),j(!1)}}):Object(o.jsx)(d,{type:"button",className:"button button--icon button--pause",onButtonClick:_})]}),Object(o.jsx)("div",{className:"todo__list-block todo__list-block--delete",children:Object(o.jsx)(d,{className:"button button--icon button--delete",type:"button",onButtonClick:function(t){_();var n={id:e,timer:m.current};A(p({context:n,isVisible:!0}))}})})]})}var v=Object(r.b)((function(t){return{todos:t.todos}}))((function(t){var e=t.todos;return Object(o.jsx)("ul",{className:"list todo__list",children:e.map((function(t){var e=t.title,n=t.id,s=t.isPaused,i=t.countdownAsMs,c=t.countdownAsString;return Object(o.jsx)(_,{title:e,id:n,isPaused:s||!0,countdownAsMs:i||0,countdownAsString:c||"00:00:00:00"},n)}))})}));function g(t){var e=t.header,n=t.children;return Object(o.jsxs)("div",{className:"modal",children:[Object(o.jsx)("div",{className:"modal__bg"}),Object(o.jsxs)("div",{className:"modal__window",children:[Object(o.jsx)("h1",{className:"text text--header modal__text--header",children:e}),n]})]})}var M=Object(r.b)((function(t){return{modal:t.modal}}))((function(t){var e=t.modal,n=Object(r.c)();return!1===e.isVisible?null:Object(o.jsxs)(g,{header:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",type:"default",children:[Object(o.jsx)("p",{className:"text text--regular modal__text--caption",children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e"}),Object(o.jsxs)("div",{className:"modal__buttons",children:[Object(o.jsx)(d,{type:"button",text:"\u0414\u0430",className:"button button--flat button--flat-red",onButtonClick:function(t){if(!e.isVisible)return!1;var o;void 0!==e.context.timer&&clearInterval(e.context.timer),n((o=e.context.id,{type:b,payload:o})),n(p({context:null,isVisible:!1}))}}),Object(o.jsx)(d,{type:"button",text:"\u041d\u0435\u0442",className:"button button--flat button--flat-blue",onButtonClick:function(t){if(!e.isVisible)return!1;n(p({context:e.context,isVisible:!1}))}})]})]})}));function P(){var t=function(t){t.preventDefault()};return Object(s.useEffect)((function(){return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}})),Object(s.useEffect)((function(){}),[]),Object(o.jsxs)("main",{className:"main",children:[Object(o.jsx)(x,{}),Object(o.jsx)(v,{}),Object(o.jsx)(M,{})]})}var N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(e){var n=e.getCLS,o=e.getFID,s=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),o(t),s(t),i(t),c(t)}))},y=n(4),E=n(3),k=n(15),D=n.n(k),V=n(8),T={key:"root",storage:D.a,blacklist:["modal"]},L=Object(V.a)(T,(function(t,e){var n=e.type,o=e.payload;switch(n){case l:return Object(E.a)(Object(E.a)({},t),{},{todos:[o].concat(Object(w.a)(t.todos))});case b:var s=t.todos.filter((function(t){return t.id!==o}));return Object(E.a)(Object(E.a)({},t),{},{todos:s});case j:var i=t.todos.map((function(t){return t.id===o.id&&(t.countdownAsString=o.countdownAsString,t.countdownAsMs=o.countdownAsMs,t.isPaused=o.isPaused),t}));return Object(E.a)(Object(E.a)({},t),{},{todos:i});case m:return Object(E.a)(Object(E.a)({},t),{},{modal:{context:o.context,isVisible:o.isVisible}});default:return Object(E.a)({},t)}})),C={todos:[{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"},{title:"Sample test",id:O(),isPaused:!1,countdownAsMs:0,countdownAsString:"00:00:00:00"}],modal:{context:null,isVisible:!1}},R=Object(y.c)(L,C,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),B=Object(V.b)(R),I=n(16);n(33);a.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(r.a,{store:R,children:Object(o.jsx)(I.a,{persistor:B,children:Object(o.jsx)(P,{})})})}),document.getElementById("root")),N()}},[[34,1,2]]]);
//# sourceMappingURL=main.5b21096e.chunk.js.map